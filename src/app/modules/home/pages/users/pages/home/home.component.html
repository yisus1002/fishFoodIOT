<section class="container p-2">
  <h1>Usuarios permitidos</h1>
  <hr>
  <div *ngIf="_sctr.dataSource.data.length>0; else elsebolk">
    <div class="container cont-btn ">
      <button class="btn btn-primary" style="z-index: 0;"
      data-bs-toggle="modal"
              data-bs-target="#ModalUser"
          (click)="_sctr.agregar()"
      mat-raised-button>Agregar un nuevo usuario</button>
    </div>
    <div class="container  container__user">
      <mat-form-field class="col col-12">
        <mat-label >Filtrar</mat-label>
        <input  matInput (keyup)="applyFilter($event)" placeholder="Buscar ..." #input>
      </mat-form-field>
        <div class="mat-elevation-z8 " tabindex="0" >
          <div class="example-container" >
              <table mat-table
               [dataSource]="_sctr.dataSource" matSort>

                <ng-container matColumnDef="name">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombres</th>
                  <td mat-cell *matCellDef="let Usuarios"> {{Usuarios?.name}} </td>
                </ng-container>

                <ng-container matColumnDef="lastName">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header >Apellidos</th>
                  <td mat-cell *matCellDef="let  Usuarios"> {{ Usuarios?.lastname}} </td>
                </ng-container>

                <ng-container matColumnDef="rol">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header >Rol</th>
                  <td mat-cell *matCellDef="let  Usuarios"> {{ Usuarios?.role}} </td>
                </ng-container>

                <ng-container matColumnDef="email">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Correo</th>
                  <td mat-cell *matCellDef="let  Usuarios"> {{ Usuarios?.email}} </td>
                </ng-container>
                <ng-container matColumnDef="password">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Contrase√±a</th>
                  <!-- <td mat-cell *matCellDef="let  Usuarios"> {{ Usuarios?.password.slice(0,8) | contrasena }} </td> -->
                  <td mat-cell *matCellDef="let  Usuarios"> {{ Usuarios?.password  }} </td>
                </ng-container>

                <ng-container matColumnDef="Opciones">
                  <th mat-header-cell *matHeaderCellDef>Opciones</th>
                  <td align="center" mat-cell *matCellDef="let  Usuarios; let i = index;">
                    <div class="d-flex px-1">
                      <button   class="btn" color="primary" (click)="_sctr.editar(Usuarios)" type="button"  mat-icon-button class="btn "
                      data-bs-toggle="modal"
                      data-bs-target="#ModalUser">
                        <mat-icon>edit</mat-icon>
                      </button>
                      <button class="btn" color="warn" (click)="_sctr.eliminar(Usuarios)" type="button" mat-icon-button class="btn ">
                        <mat-icon>delete</mat-icon>
                      </button>
                    </div>
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let Usuarios; columns: displayedColumns; let i = index"></tr>

                <tr class="mat-row" *matNoDataRow>
                  <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
                </tr>
              </table>
          </div>

          <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"
                          showFirstLastButtons
                         aria-label="Select page of users">
          </mat-paginator>

        </div>

  </div>
  </div>
<ng-template #elsebolk>
  <app-loading></app-loading>
</ng-template>

</section>
<app-form></app-form>
